<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kasal ni : Claire at Rovel</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #FFFAEC;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            color: #FFFAEC;
            touch-action: manipulation;
        }

        .instruction {
            text-align: center;
            padding: 5px;
            font-size: 14px;
            font-style: normal;
            color: #5c3c35;
            background-color: rgba(255, 255, 255, 0.7);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .book-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 2000px;
            position: relative;
            overflow: hidden;
            padding: 40px 10px 60px 10px;
        }
        
		.book {
			width: 100%;
			height: auto;
			max-width: 450px; 
			aspect-ratio: 1240/1748;
			position: relative;
			transform-style: preserve-3d;
			margin: 0 auto;
			max-height: 90vh; /* Adjust this if needed */
		}
        
        .page {
			aspect-ratio: 1240/1748;
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            right: 0;
            background-color: white;
            transform-origin: left center;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.645, 0.045, 0.355, 1);
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            visibility: hidden;
            pointer-events: none;
        }
        
        .page.active {
            visibility: visible;
            pointer-events: auto;
            z-index: 10;
        }
       
        
        .cover-image-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        .cover-image {
			width: 100%;
			height: 100%;
			object-fit: cover;
        }
        
        .cover-image-container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .page-indicators {
            position: fixed;
            bottom: 20px;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 8px;
            z-index: 1000;
        }
     
        .indicator {
            width: 8px;
            height: 8px;
            border-radius: 4px;
            background: rgba(92,60,53,0.2);
            transition: all 0.3s ease;
        }

        .indicator.active {
            width: 20px;
            background: #5c3c35;
        }
		
		@media (max-width: 768px) {
			.book {
				max-width: 95vw; /* Even larger on small screens */
				max-height: 100%; /* Adjust height to fit better */
			}
			
			.book-container {
				padding: 10px 5px 30px 5px; /* Minimize padding on mobile */
			}
			
			.page {
				box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2); /* Enhanced shadow for better depth */
			}
		}
		
        

    </style>
</head>
<body>
    <div class="instruction">swipe left or right to turn pages</div>
    
    <div class="book-container">
        <div class="book">
            <!-- Cover Page -->
            <div class="page cover active" data-index="0">
                <div class="cover-image-container">
                   <img src="cover.png" alt="Cover" class="cover-image" loading="lazy" width="1240" height="1748">
                </div>
            </div>
            
            <!-- Page 1 -->
            <div class="page" data-index="1">
                <div class="cover-image-container">
                   <img src="1.png" alt="Page 1" class="cover-image" loading="lazy" width="1240" height="1748">
                </div>
            </div>
            
            <!-- Page 2 -->
             <div class="page" data-index="2">
                <div class="cover-image-container">
                   <img src="2.png" alt="Page 2" class="cover-image" loading="lazy" width="1240" height="1748">
                </div>
            </div>
            
            <!-- Page 3 -->
            <div class="page" data-index="3">
                <div class="cover-image-container">
                   <img src="3.png" alt="Page 3" class="cover-image" loading="lazy" width="1240" height="1748">
                </div>
            </div>
            
            <!-- Page 4 -->
            <div class="page" data-index="4">
                <div class="cover-image-container">
                   <img src="4.png" alt="Page 4" class="cover-image" loading="lazy" width="1240" height="1748">
                </div>
            </div>
            
            <!-- Page 5 -->
            <div class="page" data-index="5">
                <div class="cover-image-container">
                   <img src="5.png" alt="Page 5" class="cover-image" loading="lazy" width="1240" height="1748">
                </div>
            </div>
			
			 <!-- Page 6 -->
            <div class="page" data-index="5">
                <div class="cover-image-container">
                   <img src="6.png" alt="Page 5" class="cover-image" loading="lazy" width="1240" height="1748">
                </div>
            </div>
			
			<!-- Page 7 -->
            <div class="page" data-index="5">
                <div class="cover-image-container">
                   <img src="7.png" alt="Page 5" class="cover-image" loading="lazy" width="1240" height="1748">
                </div>
            </div>
			
			<!-- Page 8 -->
            <div class="page" data-index="5">
                <div class="cover-image-container">
                   <img src="8.png" alt="Page 5" class="cover-image" loading="lazy" width="1240" height="1748">
                </div>
            </div>
			
			<!-- Page 9 -->
            <div class="page" data-index="5">
                <div class="cover-image-container">
                   <img src="9.png" alt="Page 5" class="cover-image" loading="lazy" width="1240" height="1748">
                </div>
            </div>
			
        </div>
    </div>
    
    <div class="page-indicators">
        <div class="indicator active" data-index="0"></div>
        <div class="indicator" data-index="1"></div>
        <div class="indicator" data-index="2"></div>
        <div class="indicator" data-index="3"></div>
        <div class="indicator" data-index="4"></div>
        <div class="indicator" data-index="5"></div>
		<div class="indicator" data-index="6"></div>
		<div class="indicator" data-index="7"></div>
		<div class="indicator" data-index="8"></div>
    </div>
    
    <script>
   document.addEventListener('DOMContentLoaded', function() {
        const pages = document.querySelectorAll('.page');
        const indicators = document.querySelectorAll('.indicator');
        
        let currentPageIndex = 0;
        let touchStartX = 0;
        let touchEndX = 0;
        let isAnimating = false;
        
        // Initialize
        pages[0].classList.add('active');
        applyAnimationStyle();
        updateIndicators();
        
        // Event listeners
        document.addEventListener('touchstart', handleTouchStart, { passive: true });
        document.addEventListener('touchmove', handleTouchMove, { passive: true });
        document.addEventListener('touchend', handleTouchEnd, { passive: true });
		
		// For desktop testing
        document.addEventListener('mousedown', handleMouseDown, { passive: true });
        document.addEventListener('mousemove', handleMouseMove, { passive: true });
        document.addEventListener('mouseup', handleMouseUp, { passive: true });
        
        // Indicators click event with debounce
        const indicatorDebounceTime = 300;
        let lastIndicatorClick = 0;
        
        indicators.forEach(indicator => {
            indicator.addEventListener('click', () => {
                const now = Date.now();
                if (now - lastIndicatorClick < indicatorDebounceTime) return;
                lastIndicatorClick = now;
                
                if (isAnimating) return;
                
                const targetIndex = parseInt(indicator.getAttribute('data-index'));
                if (targetIndex === currentPageIndex) return;
                
                navigateToPage(targetIndex);
            });
        });
        
        function navigateToPage(targetIndex) {
            if (targetIndex === currentPageIndex || isAnimating) return;
            
            if (targetIndex > currentPageIndex) {
                turnPage(true);
                
                if (targetIndex > currentPageIndex + 1) {
                    setTimeout(() => {
                        navigateToPage(targetIndex);
                    }, 600);
                }
            } else {
                turnPage(false);
                
                if (targetIndex < currentPageIndex - 1) {
                    setTimeout(() => {
                        navigateToPage(targetIndex);
                    }, 600);
                }
            }
        }
        
        // Touch event handlers
        function handleTouchStart(e) {
            touchStartX = e.touches[0].clientX;
        }

        function handleTouchMove(e) {
            touchEndX = e.touches[0].clientX;
        }
        
        function handleTouchEnd() {
            handleSwipe();
        }

        // Mouse event handlers
        let isMouseDown = false;

        function handleMouseDown(e) {
            isMouseDown = true;
            touchStartX = e.clientX;
        }

        function handleMouseMove(e) {
            if (isMouseDown) {
                touchEndX = e.clientX;
            }
        }

        function handleMouseUp() {
            if (isMouseDown) {
                handleSwipe();
                isMouseDown = false;
            }
        }
        
        // Swipe handler
        let lastSwipeTime = 0;
        const swipeDebounceTime = 300;
        
        function handleSwipe() {
            const now = Date.now();
            if (now - lastSwipeTime < swipeDebounceTime) return;
            lastSwipeTime = now;
            
            if (isAnimating) return;
            
            const swipeThreshold = 50;
            const swipeDistance = touchEndX - touchStartX;
            
            if (swipeDistance < -swipeThreshold) {
                if (currentPageIndex < pages.length - 1) {
                    requestAnimationFrame(() => turnPage(true));
                }
            } else if (swipeDistance > swipeThreshold) {
                if (currentPageIndex > 0) {
                    requestAnimationFrame(() => turnPage(false));
                }
            }
        }
        
        function turnPage(forward) {
            if (isAnimating) return;
            isAnimating = true;
            
            const currentPage = pages[currentPageIndex];
            let nextPageIndex, nextPage;
            
            if (forward) {
                nextPageIndex = currentPageIndex + 1;
                if (nextPageIndex >= pages.length) {
                    isAnimating = false;
                    return;
                }
                nextPage = pages[nextPageIndex];
                
                nextPage.style.visibility = 'visible';
                nextPage.style.zIndex = '15';
                currentPage.style.zIndex = '20';
                
                currentPage.classList.add('flipping');
                
                setTimeout(() => {
                    currentPage.classList.remove('active', 'flipping');
                    nextPage.classList.add('active');
                    
                    setTimeout(() => {
                        currentPage.style.visibility = 'hidden';
                        currentPage.style.zIndex = '';
                        currentPageIndex = nextPageIndex;
                        updateIndicators();
                        isAnimating = false;
                    }, 50);
                }, 600);
            } else {
                nextPageIndex = currentPageIndex - 1;
                if (nextPageIndex < 0) {
                    isAnimating = false;
                    return;
                }
                nextPage = pages[nextPageIndex];
                
                nextPage.style.visibility = 'visible';
                nextPage.style.zIndex = '20';
                currentPage.style.zIndex = '15';
                
                nextPage.classList.add('flipping-back');
                nextPage.classList.add('active');
                
                setTimeout(() => {
                    currentPage.classList.remove('active');
                    nextPage.classList.remove('flipping-back');
                    
                    setTimeout(() => {
                        currentPage.style.visibility = 'hidden';
                        currentPageIndex = nextPageIndex;
                        updateIndicators();
                        isAnimating = false;
                    }, 50);
                }, 600);
            }
        }

        function updateIndicators() {
            indicators.forEach((indicator, index) => {
                if (index === currentPageIndex) {
                    indicator.classList.add('active');
                } else {
                    indicator.classList.remove('active');
                }
            });
        }
        
		function applyAnimationStyle() {
			// Remove all animation classes first
			document.querySelectorAll('.page').forEach(page => {
				page.classList.remove('flipping', 'flipping-back');
			});
			
			// Force reflow to ensure animations restart
			document.querySelectorAll('.page').forEach(page => {
				void page.offsetWidth;
			});

			const style = document.createElement('style');
			style.id = 'animation-style';
			
			// Update animation style to respect container size
			style.textContent = `
				.page {
					transition: all 1s cubic-bezier(0.47, 0, 0.745, 0.715);

				}
				.flipping {
					transform: scale(0.2) translateX(-100%);
					opacity: 0;
					z-index: 10;
				}
				.flipping-back {
					transform: scale(0.2) translateX(100%);
					opacity: 0;
					z-index: 10;
				}
			`;
			
			const oldStyle = document.getElementById('animation-style');
			if (oldStyle) oldStyle.remove();
			document.head.appendChild(style);
		}
    });
    </script>
</body>
</html>
